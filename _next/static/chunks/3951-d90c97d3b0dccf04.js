"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3951],{93951:function(t,e,i){i.d(e,{a:function(){return k}});var n=i(84534),s=i(10360),o=i(70626),a=i(4557),r=i(11819),h=i(96733),_=i(74948),l=i(54025),p=i(9434),d=i(60584);class c{constructor(t,e,i){this._vertices=[],this._indices=[],this._isRightHanded=i.useRightHandedSystem,this._collectIndices=e}addNodeMeshes(t,e){t.computeWorldMatrix(!0);let i=n.jp.Matrix[0];if(n.y3.ScalingToRef(t.absoluteScaling.x,t.absoluteScaling.y,t.absoluteScaling.z,i),t instanceof h.Kj?this._addMesh(t,i):t instanceof _.S&&this._addMesh(t.sourceMesh,i),e){let e=n.jp.Matrix[1];t.computeWorldMatrix().invertToRef(e);let s=n.jp.Matrix[2];e.multiplyToRef(i,s),t.getChildMeshes(!1).filter(t=>!t.physicsBody).forEach(t=>{let e=t.computeWorldMatrix(),i=n.jp.Matrix[3];e.multiplyToRef(s,i),t instanceof h.Kj?this._addMesh(t,i):t instanceof _.S&&this._addMesh(t.sourceMesh,i)})}}_addMesh(t,e){let i=t.getVerticesData(l.o.PositionKind)||[],s=i.length/3,o=this._vertices.length;for(let t=0;t<s;t++){let s=new n.P(i[3*t+0],i[3*t+1],i[3*t+2]);this._vertices.push(n.P.TransformCoordinates(s,e))}if(this._collectIndices){let e=t.getIndices();if(e)for(let t=0;t<e.length;t+=3)this._isRightHanded?(this._indices.push(e[t+0]+o),this._indices.push(e[t+1]+o),this._indices.push(e[t+2]+o)):(this._indices.push(e[t+2]+o),this._indices.push(e[t+1]+o),this._indices.push(e[t+0]+o))}}getVertices(t){let e=3*this._vertices.length,i=t._malloc(4*e),n=new Float32Array(t.HEAPU8.buffer,i,e);for(let t=0;t<this._vertices.length;t++)n[3*t+0]=this._vertices[t].x,n[3*t+1]=this._vertices[t].y,n[3*t+2]=this._vertices[t].z;return{offset:i,numObjects:e}}freeBuffer(t,e){t._free(e.offset)}getTriangles(t){let e=4*this._indices.length,i=t._malloc(e),n=new Int32Array(t.HEAPU8.buffer,i,this._indices.length);for(let t=0;t<this._indices.length;t++)n[t]=this._indices[t];return{offset:i,numObjects:this._indices.length}}}class u{constructor(t){this.hpBodyId=t,this.userMassProps={centerOfMass:void 0,mass:void 0,inertia:void 0,inertiaOrientation:void 0}}}class y{constructor(){this.bodyId=BigInt(0),this.position=new n.P,this.normal=new n.P}}class g{constructor(){this.contactOnA=new y,this.contactOnB=new y,this.impulseApplied=0,this.type=0}static readToRef(t,e,i){let n=new Int32Array(t,e),s=new Float32Array(t,e);i.contactOnA.bodyId=BigInt(n[2]),i.contactOnA.position.set(s[10],s[11],s[12]),i.contactOnA.normal.set(s[13],s[14],s[15]),i.contactOnB.bodyId=BigInt(n[18]),i.contactOnB.position.set(s[26],s[27],s[28]),i.contactOnB.normal.set(s[29],s[30],s[31]),i.impulseApplied=s[34],i.type=n[0]}}class C{constructor(){this.bodyIdA=BigInt(0),this.bodyIdB=BigInt(0),this.type=0}static readToRef(t,e,i){let n=new Int32Array(t,e);i.type=n[0],i.bodyIdA=BigInt(n[2]),i.bodyIdB=BigInt(n[6])}}class k{constructor(t=!0,e=HK){if(this._useDeltaForWorldStep=t,this._hknp={},this.name="HavokPlugin",this._fixedTimeStep=1/60,this._tmpVec3=(0,p.$G)(3,n.P.Zero),this._bodies=new Map,this._shapes=new Map,this._bodyCollisionObservable=new Map,this._constraintToBodyIdPair=new Map,this._bodyCollisionEndedObservable=new Map,this.onCollisionObservable=new d.y$,this.onCollisionEndedObservable=new d.y$,this.onTriggerCollisionObservable=new d.y$,"function"==typeof e){o.Y.Error("Havok is not ready. Please make sure you await HK() before using the plugin.");return}if(this._hknp=e,!this.isSupported()){o.Y.Error("Havok is not available. Please make sure you included the js file.");return}this.world=this._hknp.HP_World_Create()[1],this._queryCollector=this._hknp.HP_QueryCollector_Create(1)[1]}isSupported(){return void 0!==this._hknp}setGravity(t){this._hknp.HP_World_SetGravity(this.world,this._bVecToV3(t))}setTimeStep(t){this._fixedTimeStep=t}getTimeStep(){return this._fixedTimeStep}executeStep(t,e){for(let t of e)t.disablePreStep||this.setPhysicsBodyTransformation(t,t.transformNode);let i=this._useDeltaForWorldStep?t:this._fixedTimeStep;for(let t of(this._hknp.HP_World_SetIdealStepTime(this.world,i),this._hknp.HP_World_Step(this.world,i),this._bodyBuffer=this._hknp.HP_World_GetBodyBuffer(this.world)[1],e))t.disableSync||this.sync(t);this._notifyCollisions(),this._notifyTriggers()}getPluginVersion(){return 2}setVelocityLimits(t,e){this._hknp.HP_World_SetSpeedLimit(this.world,t,e)}getMaxLinearVelocity(){return this._hknp.HP_World_GetSpeedLimit(this.world)[1]}getMaxAngularVelocity(){return this._hknp.HP_World_GetSpeedLimit(this.world)[2]}initBody(t,e,i,n){t._pluginData=new u(this._hknp.HP_Body_Create()[1]),this._internalSetMotionType(t._pluginData,e);let s=[this._bVecToV3(i),this._bQuatToV4(n)];this._hknp.HP_Body_SetQTransform(t._pluginData.hpBodyId,s),this._hknp.HP_World_AddBody(this.world,t._pluginData.hpBodyId,t.startAsleep),this._bodies.set(t._pluginData.hpBodyId[0],{body:t,index:0})}removeBody(t){if(t._pluginDataInstances&&t._pluginDataInstances.length>0)for(let e of t._pluginDataInstances)this._bodyCollisionObservable.delete(e.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,e.hpBodyId),this._bodies.delete(e.hpBodyId[0]);t._pluginData&&(this._bodyCollisionObservable.delete(t._pluginData.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,t._pluginData.hpBodyId),this._bodies.delete(t._pluginData.hpBodyId[0]))}initBodyInstances(t,e,i){let n=i._thinInstanceDataStorage?.instancesCount??0,s=i._thinInstanceDataStorage.matrixData;s&&(this._createOrUpdateBodyInstances(t,e,s,0,n,!1),t._pluginDataInstances.forEach((e,i)=>{this._bodies.set(e.hpBodyId[0],{body:t,index:i})}))}_createOrUpdateBodyInstances(t,e,i,s,o,a){let r=n.jp.Quaternion[0],h=n.y3.Identity();for(let _=s;_<o;_++){let s;let o=[i[16*_+12],i[16*_+13],i[16*_+14]];s=a?t._pluginDataInstances[_].hpBodyId:this._hknp.HP_Body_Create()[1],h.setRowFromFloats(0,i[16*_+0],i[16*_+1],i[16*_+2],0),h.setRowFromFloats(1,i[16*_+4],i[16*_+5],i[16*_+6],0),h.setRowFromFloats(2,i[16*_+8],i[16*_+9],i[16*_+10],0),n._f.FromRotationMatrixToRef(h,r);let l=[o,[r.x,r.y,r.z,r.w]];if(this._hknp.HP_Body_SetQTransform(s,l),!a){let i=new u(s);t._pluginDataInstances.length&&(i.userMassProps=t._pluginDataInstances[0].userMassProps),this._internalSetMotionType(i,e),this._internalUpdateMassProperties(i),t._pluginDataInstances.push(i),this._hknp.HP_World_AddBody(this.world,s,t.startAsleep),i.worldTransformOffset=this._hknp.HP_Body_GetWorldTransformOffset(s)[1]}}}updateBodyInstances(t,e){let i=e._thinInstanceDataStorage?.instancesCount??0,n=e._thinInstanceDataStorage.matrixData;if(!n)return;let s=t._pluginDataInstances.length,o=this.getMotionType(t);if(i>s){this._createOrUpdateBodyInstances(t,o,n,s,i,!1);let e=this._hknp.HP_Body_GetShape(t._pluginDataInstances[0].hpBodyId)[1];e[0]||(e[0]=t.shape?._pluginData[0]);for(let n=s;n<i;n++)this._hknp.HP_Body_SetShape(t._pluginDataInstances[n].hpBodyId,e),this._internalUpdateMassProperties(t._pluginDataInstances[n]),this._bodies.set(t._pluginDataInstances[n].hpBodyId[0],{body:t,index:n})}else if(i<s){let e=s-i;for(let i=0;i<e;i++){let e=t._pluginDataInstances.pop();this._bodies.delete(e.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,e.hpBodyId),this._hknp.HP_Body_Release(e.hpBodyId)}this._createOrUpdateBodyInstances(t,o,n,0,i,!0)}}sync(t){this.syncTransform(t,t.transformNode)}syncTransform(t,e){if(t._pluginDataInstances.length){let i=e._thinInstanceDataStorage.matrixData;if(!i)return;let n=t._pluginDataInstances.length;for(let e=0;e<n;e++){let n=t._pluginDataInstances[e].worldTransformOffset,s=new Float32Array(this._hknp.HEAPU8.buffer,this._bodyBuffer+n,16),o=16*e;for(let t=0;t<15;t++)(3&t)!=3&&(i[o+t]=s[t]);i[o+15]=1}e.thinInstanceBufferUpdated("matrix")}else try{let i=this._hknp.HP_Body_GetQTransform(t._pluginData.hpBodyId)[1],s=i[0],o=i[1],a=n.jp.Quaternion[0];a.set(o[0],o[1],o[2],o[3]);let r=e.parent;if(r&&!r.getWorldMatrix().isIdentity()){r.computeWorldMatrix(!0),n.jp.Vector3[1].copyFrom(e.scaling),a.normalize();let t=n.jp.Matrix[0],i=n.jp.Vector3[0];i.copyFromFloats(s[0],s[1],s[2]),n.y3.ComposeToRef(e.absoluteScaling,a,i,t);let o=n.jp.Matrix[1];r.getWorldMatrix().invertToRef(o);let h=n.jp.Matrix[2];t.multiplyToRef(o,h),h.decomposeToTransformNode(e),e.rotationQuaternion?.normalize(),e.scaling.copyFrom(n.jp.Vector3[1])}else e.position.set(s[0],s[1],s[2]),e.rotationQuaternion?e.rotationQuaternion.copyFrom(a):a.toEulerAnglesToRef(e.rotation)}catch(t){o.Y.Error(`Syncing transform failed for node ${e.name}: ${t.message}...`)}}setShape(t,e){let i=e&&e._pluginData?e._pluginData:BigInt(0);if(!(t.transformNode instanceof h.Kj)||!t.transformNode._thinInstanceDataStorage?.matrixData){this._hknp.HP_Body_SetShape(t._pluginData.hpBodyId,i),this._internalUpdateMassProperties(t._pluginData);return}let n=t.transformNode,s=n._thinInstanceDataStorage?.instancesCount??0;for(let e=0;e<s;e++)this._hknp.HP_Body_SetShape(t._pluginDataInstances[e].hpBodyId,i),this._internalUpdateMassProperties(t._pluginDataInstances[e])}_getPluginReference(t,e){return t._pluginDataInstances?.length?t._pluginDataInstances[e??0]:t._pluginData}getShape(t){let e=this._getPluginReference(t),i=this._hknp.HP_Body_GetShape(e.hpBodyId)[1];if(0!=i){let e=t.transformNode.getScene();return new a.$n({pluginData:i},e)}return null}getShapeType(t){return t.type?t.type:this._hknp.HP_Shape_GetType(t._pluginData)}setEventMask(t,e,i){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_SetEventMask(t.hpBodyId,e)},i)}getEventMask(t,e){let i=this._getPluginReference(t,e);return this._hknp.HP_Body_GetEventMask(i.hpBodyId)[1]}_fromMassPropertiesTuple(t){return{centerOfMass:n.P.FromArray(t[0]),mass:t[1],inertia:n.P.FromArray(t[2]),inertiaOrientation:n._f.FromArray(t[3])}}_internalUpdateMassProperties(t){let e=this._internalComputeMassProperties(t),i=t.userMassProps;i.centerOfMass&&(e[0]=i.centerOfMass.asArray()),void 0!=i.mass&&(e[1]=i.mass),i.inertia&&(e[2]=i.inertia.asArray()),i.inertiaOrientation&&(e[3]=i.inertiaOrientation.asArray()),this._hknp.HP_Body_SetMassProperties(t.hpBodyId,e)}_internalSetMotionType(t,e){switch(e){case 0:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.STATIC);break;case 1:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.KINEMATIC);break;case 2:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.DYNAMIC)}}setMotionType(t,e,i){this._applyToBodyOrInstances(t,t=>{this._internalSetMotionType(t,e)},i)}getMotionType(t,e){let i=this._getPluginReference(t,e),n=this._hknp.HP_Body_GetMotionType(i.hpBodyId)[1];switch(n){case this._hknp.MotionType.STATIC:return 0;case this._hknp.MotionType.KINEMATIC:return 1;case this._hknp.MotionType.DYNAMIC:return 2}throw Error("Unknown motion type: "+n)}setActivationControl(t,e){switch(e){case 1:this._hknp.HP_Body_SetActivationControl(t._pluginData.hpBodyId,this._hknp.ActivationControl.ALWAYS_ACTIVE);break;case 2:this._hknp.HP_Body_SetActivationControl(t._pluginData.hpBodyId,this._hknp.ActivationControl.ALWAYS_INACTIVE);break;case 0:this._hknp.HP_Body_SetActivationControl(t._pluginData.hpBodyId,this._hknp.ActivationControl.SIMULATION_CONTROLLED)}}_internalComputeMassProperties(t){let e=this._hknp.HP_Body_GetShape(t.hpBodyId);if(e[0]==this._hknp.Result.RESULT_OK){let t=this._hknp.HP_Shape_BuildMassProperties(e[1]);if(t[0]==this._hknp.Result.RESULT_OK)return t[1]}return[[0,0,0],1,[1,1,1],[0,0,0,1]]}computeMassProperties(t,e){let i=this._getPluginReference(t,e),n=this._internalComputeMassProperties(i);return this._fromMassPropertiesTuple(n)}setMassProperties(t,e,i){this._applyToBodyOrInstances(t,t=>{t.userMassProps=e,this._internalUpdateMassProperties(t)},i)}getMassProperties(t,e){let i=this._getPluginReference(t,e),n=this._hknp.HP_Body_GetMassProperties(i.hpBodyId)[1];return this._fromMassPropertiesTuple(n)}setLinearDamping(t,e,i){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_SetLinearDamping(t.hpBodyId,e)},i)}getLinearDamping(t,e){let i=this._getPluginReference(t,e);return this._hknp.HP_Body_GetLinearDamping(i.hpBodyId)[1]}setAngularDamping(t,e,i){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_SetAngularDamping(t.hpBodyId,e)},i)}getAngularDamping(t,e){let i=this._getPluginReference(t,e);return this._hknp.HP_Body_GetAngularDamping(i.hpBodyId)[1]}setLinearVelocity(t,e,i){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_SetLinearVelocity(t.hpBodyId,this._bVecToV3(e))},i)}getLinearVelocityToRef(t,e,i){let n=this._getPluginReference(t,i),s=this._hknp.HP_Body_GetLinearVelocity(n.hpBodyId)[1];this._v3ToBvecRef(s,e)}_applyToBodyOrInstances(t,e,i){if(t._pluginDataInstances?.length>0&&void 0===i)for(let i=0;i<t._pluginDataInstances.length;i++)e(t._pluginDataInstances[i]);else e(this._getPluginReference(t,i))}applyImpulse(t,e,i,n){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_ApplyImpulse(t.hpBodyId,this._bVecToV3(i),this._bVecToV3(e))},n)}applyAngularImpulse(t,e,i){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_ApplyAngularImpulse(t.hpBodyId,this._bVecToV3(e))},i)}applyForce(t,e,i,n){e.scaleToRef(this.getTimeStep(),this._tmpVec3[0]),this.applyImpulse(t,this._tmpVec3[0],i,n)}setAngularVelocity(t,e,i){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_SetAngularVelocity(t.hpBodyId,this._bVecToV3(e))},i)}getAngularVelocityToRef(t,e,i){let n=this._getPluginReference(t,i),s=this._hknp.HP_Body_GetAngularVelocity(n.hpBodyId)[1];this._v3ToBvecRef(s,e)}setPhysicsBodyTransformation(t,e){if(t.getPrestepType()==s.v7.TELEPORT){let i=t.transformNode;if(t.numInstances>0){let e=i._thinInstanceDataStorage.matrixData;if(!e)return;let n=t.numInstances;this._createOrUpdateBodyInstances(t,t.getMotionType(),e,0,n,!0)}else this._hknp.HP_Body_SetQTransform(t._pluginData.hpBodyId,this._getTransformInfos(e))}else t.getPrestepType()==s.v7.ACTION?this.setTargetTransform(t,e.absolutePosition,e.absoluteRotationQuaternion):t.getPrestepType()==s.v7.DISABLED?o.Y.Warn("Prestep type is set to DISABLED. Unable to set physics body transformation."):o.Y.Warn("Invalid prestep type set to physics body.")}setTargetTransform(t,e,i,n){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_SetTargetQTransform(t.hpBodyId,[this._bVecToV3(e),this._bQuatToV4(i)])},n)}setGravityFactor(t,e,i){this._applyToBodyOrInstances(t,t=>{this._hknp.HP_Body_SetGravityFactor(t.hpBodyId,e)},i)}getGravityFactor(t,e){let i=this._getPluginReference(t,e);return this._hknp.HP_Body_GetGravityFactor(i.hpBodyId)[1]}disposeBody(t){if(t._pluginDataInstances&&t._pluginDataInstances.length>0)for(let e of t._pluginDataInstances)this._hknp.HP_Body_Release(e.hpBodyId),e.hpBodyId=void 0;t._pluginData&&(this._hknp.HP_Body_Release(t._pluginData.hpBodyId),t._pluginData.hpBodyId=void 0)}_createOptionsFromGroundMesh(t){let e;let i=t.groundMesh;if(!i)return;let s=i.getVerticesData(l.o.PositionKind),o=i.computeWorldMatrix(!0),a=[];for(e=0;e<s.length;e+=3)n.P.FromArrayToRef(s,e,n.jp.Vector3[0]),n.P.TransformCoordinatesToRef(n.jp.Vector3[0],o,n.jp.Vector3[1]),n.jp.Vector3[1].toArray(a,e);let r=~~(Math.sqrt((s=a).length/3)-1),h=i.getBoundingInfo(),_=Math.min(h.boundingBox.extendSizeWorld.x,h.boundingBox.extendSizeWorld.z),p=h.boundingBox.minimumWorld.x,d=h.boundingBox.minimumWorld.y,c=h.boundingBox.minimumWorld.z,u=new Float32Array((r+1)*(r+1)),y=2*_/r;for(let t=0;t<u.length;t++)u[t]=d;for(let t=0;t<s.length;t+=3){let e=Math.round((s[t+0]-p)/y),i=r-Math.round((s[t+2]-c)/y),n=s[t+1]-d;u[i*(r+1)+e]=n}t.numHeightFieldSamplesX=r+1,t.numHeightFieldSamplesZ=r+1,t.heightFieldSizeX=2*h.boundingBox.extendSizeWorld.x,t.heightFieldSizeZ=2*h.boundingBox.extendSizeWorld.z,t.heightFieldData=u}initShape(t,e,i){switch(e){case 0:{let e=i.radius||1,n=i.center?this._bVecToV3(i.center):[0,0,0];t._pluginData=this._hknp.HP_Shape_CreateSphere(n,e)[1]}break;case 3:{let e=i.rotation?this._bQuatToV4(i.rotation):[0,0,0,1],n=i.extents?this._bVecToV3(i.extents):[1,1,1],s=i.center?this._bVecToV3(i.center):[0,0,0];t._pluginData=this._hknp.HP_Shape_CreateBox(s,e,n)[1]}break;case 1:{let e=i.pointA?this._bVecToV3(i.pointA):[0,0,0],n=i.pointB?this._bVecToV3(i.pointB):[0,1,0],s=i.radius||0;t._pluginData=this._hknp.HP_Shape_CreateCapsule(e,n,s)[1]}break;case 5:t._pluginData=this._hknp.HP_Shape_CreateContainer()[1];break;case 2:{let e=i.pointA?this._bVecToV3(i.pointA):[0,0,0],n=i.pointB?this._bVecToV3(i.pointB):[0,1,0],s=i.radius||0;t._pluginData=this._hknp.HP_Shape_CreateCylinder(e,n,s)[1]}break;case 4:case 6:{let n=i.mesh;if(n){let s=!!i.includeChildMeshes,o=new c(n,4!=e,n?.getScene());o.addNodeMeshes(n,s);let a=o.getVertices(this._hknp),r=a.numObjects/3;if(4==e)t._pluginData=this._hknp.HP_Shape_CreateConvexHull(a.offset,r)[1];else{let e=o.getTriangles(this._hknp),i=e.numObjects/3;t._pluginData=this._hknp.HP_Shape_CreateMesh(a.offset,r,e.offset,i)[1],o.freeBuffer(this._hknp,e)}o.freeBuffer(this._hknp,a)}else throw Error("No mesh provided to create physics shape.")}break;case 7:if(i.groundMesh&&this._createOptionsFromGroundMesh(i),i.numHeightFieldSamplesX&&i.numHeightFieldSamplesZ&&i.heightFieldSizeX&&i.heightFieldSizeZ&&i.heightFieldData){let e=i.numHeightFieldSamplesX*i.numHeightFieldSamplesZ,n=this._hknp._malloc(4*e),s=new Float32Array(this._hknp.HEAPU8.buffer,n,e);for(let t=0;t<i.numHeightFieldSamplesX;t++)for(let e=0;e<i.numHeightFieldSamplesZ;e++){let n=e*i.numHeightFieldSamplesX+t,o=(i.numHeightFieldSamplesX-1-t)*i.numHeightFieldSamplesZ+e;s[n]=i.heightFieldData[o]}let o=i.heightFieldSizeX/(i.numHeightFieldSamplesX-1),a=i.heightFieldSizeZ/(i.numHeightFieldSamplesZ-1);t._pluginData=this._hknp.HP_Shape_CreateHeightField(i.numHeightFieldSamplesX,i.numHeightFieldSamplesZ,[o,1,a],n)[1],this._hknp._free(n)}else throw Error("Missing required heightfield parameters");break;default:throw Error("Unsupported Shape Type.")}this._shapes.set(t._pluginData[0],t)}setShapeFilterMembershipMask(t,e){let i=this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][1];this._hknp.HP_Shape_SetFilterInfo(t._pluginData,[e,i])}getShapeFilterMembershipMask(t){return this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][0]}setShapeFilterCollideMask(t,e){let i=this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][0];this._hknp.HP_Shape_SetFilterInfo(t._pluginData,[i,e])}getShapeFilterCollideMask(t){return this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][1]}setMaterial(t,e){let i=e.friction??.5,n=e.staticFriction??i,s=e.restitution??0,o=e.frictionCombine??1,a=e.restitutionCombine??2,r=[n,i,s,this._materialCombineToNative(o),this._materialCombineToNative(a)];this._hknp.HP_Shape_SetMaterial(t._pluginData,r)}getMaterial(t){let e=this._hknp.HP_Shape_GetMaterial(t._pluginData)[1];return{staticFriction:e[0],friction:e[1],restitution:e[2],frictionCombine:this._nativeToMaterialCombine(e[3]),restitutionCombine:this._nativeToMaterialCombine(e[4])}}setDensity(t,e){this._hknp.HP_Shape_SetDensity(t._pluginData,e)}getDensity(t){return this._hknp.HP_Shape_GetDensity(t._pluginData)[1]}_getTransformInfos(t){if(t.parent)return t.computeWorldMatrix(!0),[this._bVecToV3(t.absolutePosition),this._bQuatToV4(t.absoluteRotationQuaternion)];let e=n.jp.Quaternion[0];if(t.rotationQuaternion)e=t.rotationQuaternion;else{let i=t.rotation;n._f.FromEulerAnglesToRef(i.x,i.y,i.z,e)}return[this._bVecToV3(t.position),this._bQuatToV4(e)]}addChild(t,e,i,n,s){let o=[i?this._bVecToV3(i):[0,0,0],n?this._bQuatToV4(n):[0,0,0,1],s?this._bVecToV3(s):[1,1,1]];this._hknp.HP_Shape_AddChild(t._pluginData,e._pluginData,o)}removeChild(t,e){this._hknp.HP_Shape_RemoveChild(t._pluginData,e)}getNumChildren(t){return this._hknp.HP_Shape_GetNumChildren(t._pluginData)[1]}setTrigger(t,e){this._hknp.HP_Shape_SetTrigger(t._pluginData,e)}getBoundingBox(t){let e=this._hknp.HP_Shape_GetBoundingBox(t._pluginData,[[0,0,0],[0,0,0,1]])[1];return n.jp.Vector3[0].set(e[0][0],e[0][1],e[0][2]),n.jp.Vector3[1].set(e[1][0],e[1][1],e[1][2]),new r.k(n.jp.Vector3[0],n.jp.Vector3[1],n.y3.IdentityReadOnly)}getBodyBoundingBox(t){let e=this.getBoundingBox(t.shape);return new r.k(e.minimum,e.maximum,t.transformNode.getWorldMatrix())}getBodyGeometry(t){let e=t._pluginDataInstances?.length>0?t._pluginDataInstances[0]:t._pluginData,i=this._hknp.HP_Body_GetShape(e.hpBodyId)[1],n=this._hknp.HP_Shape_CreateDebugDisplayGeometry(i);if(n[0]!=this._hknp.Result.RESULT_OK)return{positions:[],indices:[]};let s=this._hknp.HP_DebugGeometry_GetInfo(n[1])[1],o=new Float32Array(this._hknp.HEAPU8.buffer,s[0],3*s[1]),a=new Uint32Array(this._hknp.HEAPU8.buffer,s[2],3*s[3]),r=o.slice(0),h=a.slice(0);return this._hknp.HP_DebugGeometry_Release(n[1]),{positions:r,indices:h}}disposeShape(t){this._hknp.HP_Shape_Release(t._pluginData),t._pluginData=void 0}initConstraint(t,e,i,s,a){let r=t.type,h=t.options;if(!r||!h){o.Y.Warn("No constraint type or options. Constraint is invalid.");return}if(e._pluginDataInstances.length>0&&void 0===s||i._pluginDataInstances.length>0&&void 0===a){o.Y.Warn("Body is instanced but no instance index was specified. Constraint will not be applied.");return}t._pluginData=t._pluginData??[];let _=this._hknp.HP_Constraint_Create()[1];t._pluginData.push(_);let l=this._getPluginReference(e,s).hpBodyId,p=this._getPluginReference(i,a).hpBodyId;this._hknp.HP_Constraint_SetParentBody(_,l),this._hknp.HP_Constraint_SetChildBody(_,p),this._constraintToBodyIdPair.set(_[0],[l[0],p[0]]);let d=h.pivotA?this._bVecToV3(h.pivotA):this._bVecToV3(n.P.Zero()),c=h.axisA??new n.P(1,0,0),u=this._tmpVec3[0];h.perpAxisA?u.copyFrom(h.perpAxisA):c.getNormalToRef(u),this._hknp.HP_Constraint_SetAnchorInParent(_,d,this._bVecToV3(c),this._bVecToV3(u));let y=h.pivotB?this._bVecToV3(h.pivotB):this._bVecToV3(n.P.Zero()),g=h.axisB??new n.P(1,0,0),C=this._tmpVec3[0];if(h.perpAxisB?C.copyFrom(h.perpAxisB):g.getNormalToRef(C),this._hknp.HP_Constraint_SetAnchorInChild(_,y,this._bVecToV3(g),this._bVecToV3(C)),t._initOptions||(t._initOptions={axisA:c.clone(),axisB:g.clone(),perpAxisA:u.clone(),perpAxisB:C.clone(),pivotA:new n.P(d[0],d[1],d[2]),pivotB:new n.P(y[0],y[1],y[2])}),5==r)this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(2==r){let t=h.maxDistance||0,e=this._hknp.ConstraintAxis.LINEAR_DISTANCE;this._hknp.HP_Constraint_SetAxisMode(_,e,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMinLimit(_,e,t),this._hknp.HP_Constraint_SetAxisMaxLimit(_,e,t)}else if(3==r)this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(6==r)this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(4==r)this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(1==r)this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(_,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(7==r)for(let e of t.limits){let t=this._constraintAxisToNative(e.axis);(e.minLimit??-1)==0&&(e.maxLimit??-1)==0?this._hknp.HP_Constraint_SetAxisMode(_,t,this._hknp.ConstraintAxisLimitMode.LOCKED):(void 0!=e.minLimit&&(this._hknp.HP_Constraint_SetAxisMode(_,t,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMinLimit(_,t,e.minLimit)),void 0!=e.maxLimit&&(this._hknp.HP_Constraint_SetAxisMode(_,t,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMaxLimit(_,t,e.maxLimit))),e.stiffness&&this._hknp.HP_Constraint_SetAxisStiffness(_,t,e.stiffness),e.damping&&this._hknp.HP_Constraint_SetAxisDamping(_,t,e.damping)}else throw Error("Unsupported Constraint Type.");let k=!!h.collision;this._hknp.HP_Constraint_SetCollisionsEnabled(_,k),this._hknp.HP_Constraint_SetEnabled(_,!0)}getBodiesUsingConstraint(t){let e=[];for(let i of t._pluginData){let t=this._constraintToBodyIdPair.get(i[0]);if(t){let i=this._bodies.get(t[0]),n=this._bodies.get(t[1]);i&&n&&e.push({parentBody:i.body,parentBodyIndex:i.index,childBody:n.body,childBodyIndex:n.index})}}return e}addConstraint(t,e,i,n,s){this.initConstraint(i,t,e,n,s)}setEnabled(t,e){for(let i of t._pluginData)this._hknp.HP_Constraint_SetEnabled(i,e)}getEnabled(t){let e=t._pluginData&&t._pluginData[0];return!!e&&this._hknp.HP_Constraint_GetEnabled(e)[1]}setCollisionsEnabled(t,e){for(let i of t._pluginData)this._hknp.HP_Constraint_SetCollisionsEnabled(i,e)}getCollisionsEnabled(t){let e=t._pluginData&&t._pluginData[0];return!!e&&this._hknp.HP_Constraint_GetCollisionsEnabled(e)[1]}setAxisFriction(t,e,i){for(let n of t._pluginData)this._hknp.HP_Constraint_SetAxisFriction(n,this._constraintAxisToNative(e),i)}getAxisFriction(t,e){let i=t._pluginData&&t._pluginData[0];return i?this._hknp.HP_Constraint_GetAxisFriction(i,this._constraintAxisToNative(e))[1]:null}setAxisMode(t,e,i){for(let n of t._pluginData)this._hknp.HP_Constraint_SetAxisMode(n,this._constraintAxisToNative(e),this._limitModeToNative(i))}getAxisMode(t,e){let i=t._pluginData&&t._pluginData[0];if(i){let t=this._hknp.HP_Constraint_GetAxisMode(i,this._constraintAxisToNative(e))[1];return this._nativeToLimitMode(t)}return null}setAxisMinLimit(t,e,i){for(let n of t._pluginData)this._hknp.HP_Constraint_SetAxisMinLimit(n,this._constraintAxisToNative(e),i)}getAxisMinLimit(t,e){let i=t._pluginData&&t._pluginData[0];return i?this._hknp.HP_Constraint_GetAxisMinLimit(i,this._constraintAxisToNative(e))[1]:null}setAxisMaxLimit(t,e,i){for(let n of t._pluginData)this._hknp.HP_Constraint_SetAxisMaxLimit(n,this._constraintAxisToNative(e),i)}getAxisMaxLimit(t,e){let i=t._pluginData&&t._pluginData[0];return i?this._hknp.HP_Constraint_GetAxisMaxLimit(i,this._constraintAxisToNative(e))[1]:null}setAxisMotorType(t,e,i){for(let n of t._pluginData)this._hknp.HP_Constraint_SetAxisMotorType(n,this._constraintAxisToNative(e),this._constraintMotorTypeToNative(i))}getAxisMotorType(t,e){let i=t._pluginData&&t._pluginData[0];return i?this._nativeToMotorType(this._hknp.HP_Constraint_GetAxisMotorType(i,this._constraintAxisToNative(e))[1]):null}setAxisMotorTarget(t,e,i){for(let n of t._pluginData)this._hknp.HP_Constraint_SetAxisMotorTarget(n,this._constraintAxisToNative(e),i)}getAxisMotorTarget(t,e){return t._pluginData&&t._pluginData[0]?this._hknp.HP_Constraint_GetAxisMotorTarget(t._pluginData,this._constraintAxisToNative(e))[1]:null}setAxisMotorMaxForce(t,e,i){for(let n of t._pluginData)this._hknp.HP_Constraint_SetAxisMotorMaxForce(n,this._constraintAxisToNative(e),i)}getAxisMotorMaxForce(t,e){let i=t._pluginData&&t._pluginData[0];return i?this._hknp.HP_Constraint_GetAxisMotorMaxForce(i,this._constraintAxisToNative(e))[1]:null}disposeConstraint(t){for(let e of t._pluginData)this._hknp.HP_Constraint_SetEnabled(e,!1),this._hknp.HP_Constraint_Release(e);t._pluginData.length=0}_populateHitData(t,e){let i=this._bodies.get(t[0][0]);e.body=i?.body,e.bodyIndex=i?.index;let n=this._shapes.get(t[1][0]);e.shape=n;let s=t[3],o=t[4],a=t[5];e.setHitData({x:o[0],y:o[1],z:o[2]},{x:s[0],y:s[1],z:s[2]},a)}raycast(t,e,i,n){let s=n?.membership??-1,o=n?.collideWith??-1,a=n?.shouldHitTriggers??!1;i.reset(t,e);let r=[BigInt(0)],h=[this._bVecToV3(t),this._bVecToV3(e),[s,o],a,r];if(this._hknp.HP_World_CastRayWithCollector(this.world,this._queryCollector,h),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){let[,t]=this._hknp.HP_QueryCollector_GetCastRayResult(this._queryCollector,0)[1];this._populateHitData(t,i),i.calculateHitDistance()}}pointProximity(t,e){let i=t?.collisionFilter?.membership??-1,n=t?.collisionFilter?.collideWith??-1;e.reset();let s=t.ignoreBody?[BigInt(t.ignoreBody._pluginData.hpBodyId[0])]:[BigInt(0)],o=[this._bVecToV3(t.position),t.maxDistance,[i,n],t.shouldHitTriggers,s];if(this._hknp.HP_World_PointProximityWithCollector(this.world,this._queryCollector,o),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){let[t,i]=this._hknp.HP_QueryCollector_GetPointProximityResult(this._queryCollector,0)[1];this._populateHitData(i,e),e.setHitDistance(t)}}shapeProximity(t,e,i){e.reset(),i.reset();let n=t.shape._pluginData,s=t.ignoreBody?[BigInt(t.ignoreBody._pluginData.hpBodyId[0])]:[BigInt(0)],o=[n,this._bVecToV3(t.position),this._bQuatToV4(t.rotation),t.maxDistance,t.shouldHitTriggers,s];if(this._hknp.HP_World_ShapeProximityWithCollector(this.world,this._queryCollector,o),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){let[t,n,s]=this._hknp.HP_QueryCollector_GetShapeProximityResult(this._queryCollector,0)[1];this._populateHitData(n,e),this._populateHitData(s,i),e.setHitDistance(t),i.setHitDistance(t)}}shapeCast(t,e,i){e.reset(),i.reset();let n=t.shape._pluginData,s=t.ignoreBody?[BigInt(t.ignoreBody._pluginData.hpBodyId[0])]:[BigInt(0)],o=[n,this._bQuatToV4(t.rotation),this._bVecToV3(t.startPosition),this._bVecToV3(t.endPosition),t.shouldHitTriggers,s];if(this._hknp.HP_World_ShapeCastWithCollector(this.world,this._queryCollector,o),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){let[t,n,s]=this._hknp.HP_QueryCollector_GetShapeCastResult(this._queryCollector,0)[1];this._populateHitData(n,e),this._populateHitData(s,i),e.setHitFraction(t),i.setHitFraction(t)}}getCollisionObservable(t){let e=t._pluginData.hpBodyId[0],i=this._bodyCollisionObservable.get(e);return i||(i=new d.y$,this._bodyCollisionObservable.set(e,i)),i}getCollisionEndedObservable(t){let e=t._pluginData.hpBodyId[0],i=this._bodyCollisionEndedObservable.get(e);return i||(i=new d.y$,this._bodyCollisionEndedObservable.set(e,i)),i}setCollisionCallbackEnabled(t,e){let i=this._hknp.EventType.COLLISION_STARTED.value|this._hknp.EventType.COLLISION_CONTINUED.value|this._hknp.EventType.COLLISION_FINISHED.value;t._pluginDataInstances&&t._pluginDataInstances.length?t._pluginDataInstances.forEach(t=>{this._hknp.HP_Body_SetEventMask(t.hpBodyId,e?i:0)}):t._pluginData&&this._hknp.HP_Body_SetEventMask(t._pluginData.hpBodyId,e?i:0)}setCollisionEndedCallbackEnabled(t,e){let i=this._getPluginReference(t),n=this._hknp.HP_Body_GetEventMask(i.hpBodyId)[1];n=e?n|this._hknp.EventType.COLLISION_FINISHED.value:n&~this._hknp.EventType.COLLISION_FINISHED.value,t._pluginDataInstances&&t._pluginDataInstances.length?t._pluginDataInstances.forEach(t=>{this._hknp.HP_Body_SetEventMask(t.hpBodyId,n)}):t._pluginData&&this._hknp.HP_Body_SetEventMask(t._pluginData.hpBodyId,n)}_notifyTriggers(){let t=this._hknp.HP_World_GetTriggerEvents(this.world)[1],e=new C;for(;t;){C.readToRef(this._hknp.HEAPU8.buffer,t,e);let i=this._bodies.get(e.bodyIdA),n=this._bodies.get(e.bodyIdB);if(i&&n){let t={collider:i.body,colliderIndex:i.index,collidedAgainst:n.body,collidedAgainstIndex:n.index,type:this._nativeTriggerCollisionValueToCollisionType(e.type)};this.onTriggerCollisionObservable.notifyObservers(t)}t=this._hknp.HP_World_GetNextTriggerEvent(this.world,t)}}_notifyCollisions(){let t=this._hknp.HP_World_GetCollisionEvents(this.world)[1],e=new g,i=Number(this.world);for(;t;){g.readToRef(this._hknp.HEAPU8.buffer,t,e);let s=this._bodies.get(e.contactOnA.bodyId),o=this._bodies.get(e.contactOnB.bodyId);if(s&&o){let t={collider:s.body,colliderIndex:s.index,collidedAgainst:o.body,collidedAgainstIndex:o.index,type:this._nativeCollisionValueToCollisionType(e.type)};if("COLLISION_FINISHED"===t.type)this.onCollisionEndedObservable.notifyObservers(t);else{e.contactOnB.position.subtractToRef(e.contactOnA.position,this._tmpVec3[0]);let i=n.P.Dot(this._tmpVec3[0],e.contactOnA.normal);t.point=e.contactOnA.position,t.distance=i,t.impulse=e.impulseApplied,t.normal=e.contactOnA.normal,this.onCollisionObservable.notifyObservers(t)}if(this._bodyCollisionObservable.size&&"COLLISION_FINISHED"!==t.type){let i=this._bodyCollisionObservable.get(e.contactOnA.bodyId),a=this._bodyCollisionObservable.get(e.contactOnB.bodyId);e.contactOnA.position.subtractToRef(e.contactOnB.position,this._tmpVec3[0]);let r=n.P.Dot(this._tmpVec3[0],e.contactOnB.normal);if(i&&i.notifyObservers(t),a){let t={collider:o.body,colliderIndex:o.index,collidedAgainst:s.body,collidedAgainstIndex:s.index,point:e.contactOnB.position,distance:r,impulse:e.impulseApplied,normal:e.contactOnB.normal,type:this._nativeCollisionValueToCollisionType(e.type)};a.notifyObservers(t)}}else if(this._bodyCollisionEndedObservable.size){let i=this._bodyCollisionEndedObservable.get(e.contactOnA.bodyId),a=this._bodyCollisionEndedObservable.get(e.contactOnB.bodyId);e.contactOnA.position.subtractToRef(e.contactOnB.position,this._tmpVec3[0]);let r=n.P.Dot(this._tmpVec3[0],e.contactOnB.normal);if(i&&i.notifyObservers(t),a){let t={collider:o.body,colliderIndex:o.index,collidedAgainst:s.body,collidedAgainstIndex:s.index,point:e.contactOnB.position,distance:r,impulse:e.impulseApplied,normal:e.contactOnB.normal,type:this._nativeCollisionValueToCollisionType(e.type)};a.notifyObservers(t)}}}t=this._hknp.HP_World_GetNextCollisionEvent(i,t)}}get numBodies(){return this._hknp.HP_World_GetNumBodies(this.world)[1]}dispose(){this._queryCollector&&(this._hknp.HP_QueryCollector_Release(this._queryCollector),this._queryCollector=void 0),this.world&&(this._hknp.HP_World_Release(this.world),this.world=void 0)}_v3ToBvecRef(t,e){e.set(t[0],t[1],t[2])}_bVecToV3(t){return[t._x,t._y,t._z]}_bQuatToV4(t){return[t._x,t._y,t._z,t._w]}_constraintMotorTypeToNative(t){switch(t){case 2:return this._hknp.ConstraintMotorType.POSITION;case 1:return this._hknp.ConstraintMotorType.VELOCITY}return this._hknp.ConstraintMotorType.NONE}_nativeToMotorType(t){switch(t){case this._hknp.ConstraintMotorType.POSITION:return 2;case this._hknp.ConstraintMotorType.VELOCITY:return 1}return 0}_materialCombineToNative(t){switch(t){case 0:return this._hknp.MaterialCombine.GEOMETRIC_MEAN;case 1:return this._hknp.MaterialCombine.MINIMUM;case 2:return this._hknp.MaterialCombine.MAXIMUM;case 3:return this._hknp.MaterialCombine.ARITHMETIC_MEAN;case 4:return this._hknp.MaterialCombine.MULTIPLY}}_nativeToMaterialCombine(t){switch(t){case this._hknp.MaterialCombine.GEOMETRIC_MEAN:return 0;case this._hknp.MaterialCombine.MINIMUM:return 1;case this._hknp.MaterialCombine.MAXIMUM:return 2;case this._hknp.MaterialCombine.ARITHMETIC_MEAN:return 3;case this._hknp.MaterialCombine.MULTIPLY:return 4;default:return}}_constraintAxisToNative(t){switch(t){case 0:return this._hknp.ConstraintAxis.LINEAR_X;case 1:return this._hknp.ConstraintAxis.LINEAR_Y;case 2:return this._hknp.ConstraintAxis.LINEAR_Z;case 3:return this._hknp.ConstraintAxis.ANGULAR_X;case 4:return this._hknp.ConstraintAxis.ANGULAR_Y;case 5:return this._hknp.ConstraintAxis.ANGULAR_Z;case 6:return this._hknp.ConstraintAxis.LINEAR_DISTANCE}}_nativeToLimitMode(t){switch(t){case this._hknp.ConstraintAxisLimitMode.FREE:break;case this._hknp.ConstraintAxisLimitMode.LIMITED:return 1;case this._hknp.ConstraintAxisLimitMode.LOCKED:return 2}return 0}_limitModeToNative(t){switch(t){case 0:return this._hknp.ConstraintAxisLimitMode.FREE;case 1:return this._hknp.ConstraintAxisLimitMode.LIMITED;case 2:return this._hknp.ConstraintAxisLimitMode.LOCKED}}_nativeCollisionValueToCollisionType(t){switch(t){case this._hknp.EventType.COLLISION_STARTED.value:break;case this._hknp.EventType.COLLISION_FINISHED.value:return"COLLISION_FINISHED";case this._hknp.EventType.COLLISION_CONTINUED.value:return"COLLISION_CONTINUED"}return"COLLISION_STARTED"}_nativeTriggerCollisionValueToCollisionType(t){switch(t){case 8:break;case 16:return"TRIGGER_EXITED"}return"TRIGGER_ENTERED"}}}}]);